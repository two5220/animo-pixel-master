<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <title>Animo Pixel Master - ì œë¯¸ë‚˜ì´ ì›Œí„°ë§ˆí¬ ì œê±° & ì´ë¯¸ì§€ ë¶„í• /ì••ì¶• ë„êµ¬</title>
    <meta name="description" content="AI ì›Œí„°ë§ˆí¬ ì œê±°, ì¸ìŠ¤íƒ€ê·¸ë¨ìš© ì´ë¯¸ì§€ ë¶„í• , ê³ í™”ì§ˆ ìš©ëŸ‰ ì••ì¶•ì„ ë¬´ë£Œë¡œ ì œê³µí•©ë‹ˆë‹¤. ì„œë²„ ì—…ë¡œë“œ ì—†ëŠ” ì•ˆì „í•œ í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ì´ë¯¸ì§€ ì²˜ë¦¬ ë„êµ¬ì…ë‹ˆë‹¤.">
    <meta name="keywords" content="ì´ë¯¸ì§€ ë¶„í• , ì›Œí„°ë§ˆí¬ ì œê±°, ì œë¯¸ë‚˜ì´, ì‚¬ì§„ ìš©ëŸ‰ ì¤„ì´ê¸°, ì¸ìŠ¤íƒ€ê·¸ë¨ ê·¸ë¦¬ë“œ, ì´ë¯¸ì§€ ìë¥´ê¸°, ë¬´ë£Œ ì›¹íˆ´">
    <meta name="author" content="Animo">
    <meta property="og:title" content="Animo Pixel Master">
    <meta property="og:description" content="ì„¤ì¹˜ ì—†ì´ ë°”ë¡œ ì“°ëŠ” ê°•ë ¥í•œ ì´ë¯¸ì§€ í¸ì§‘ ë„êµ¬. ì›Œí„°ë§ˆí¬ ì œê±°ë¶€í„° ë¶„í•  ì €ì¥ê¹Œì§€.">
    <meta property="og:type" content="website">
    <meta name="theme-color" content="#121212">
    <link rel="apple-touch-icon" href="icon.png"> 
    <link rel="manifest" href="manifest.json">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <style>
        /* [ê¸°ì¡´ ë””ìì¸ ë° ë¡œì§ 100% ìœ ì§€] */
        :root { 
            --primary: #00e676; 
            --primary-dim: rgba(0, 230, 118, 0.1);
            --bg-dark: #121212; 
            --panel-bg: #1e1e1e; 
            --surface: #252525;
            --border: #333; 
            --text-main: #ffffff;
            --text-sub: #aaaaaa;
            --danger: #ff5252;
            --radius-lg: 24px;
            --radius-md: 16px;
            --radius-sm: 8px;
            --gem-accent: #4285f4; /* ì œë¯¸ë‚˜ì´ í¬ì¸íŠ¸ ì»¬ëŸ¬ */
        }
        
        * { box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }
        
        body { 
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif; 
            background-color: var(--bg-dark);
            background-image: radial-gradient(circle at 50% 0%, #1a3a2a 0%, #121212 60%);
            color: var(--text-main); 
            margin: 0; 
            min-height: 100vh; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            overflow-x: hidden; 
            padding-bottom: 50px;
        }
        
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--bg-dark); }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #555; }

        #dropOverlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 10000; 
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(5px);
            border: 4px dashed var(--primary); 
            display: none; justify-content: center; align-items: center; pointer-events: none;
            transition: opacity 0.3s;
        }
        #dropOverlay.active { display: flex; }
        #dropOverlay::after { 
            content: 'ì´ë¯¸ì§€ë¥¼ ì´ê³³ì— ë†“ìœ¼ì„¸ìš”'; 
            color: var(--primary); 
            font-size: 1.8rem; 
            font-weight: 800; 
            text-shadow: 0 0 20px rgba(0,230,118,0.4);
        }

        .container { 
            background: var(--panel-bg); 
            padding: 3rem; 
            border-radius: var(--radius-lg); 
            box-shadow: 0 20px 60px rgba(0,0,0,0.5); 
            text-align: center; 
            width: 95%; 
            max-width: 620px; 
            border: 1px solid rgba(255,255,255,0.05); 
            z-index: 10; 
            position: relative; 
            margin-top: 5vh; 
            margin-bottom: 2rem;
        }
        
        @media (max-width: 480px) {
            .container { padding: 1.2rem; margin-top: 20px; }
        }
        
        .header-wrap { 
            display: flex; justify-content: center; align-items: center; 
            margin-bottom: 1.2rem; 
            position: relative; width: 100%; 
        }
        h1 { 
            color: var(--primary); margin: 0; font-weight: 900; font-size: 2rem; 
            letter-spacing: -0.5px;
            background: linear-gradient(135deg, #00e676 0%, #69f0ae 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .lang-wrapper {
            position: absolute; 
            right: 0;
            bottom: -25px; 
            display: flex;
            align-items: center;
            gap: 5px; 
        }

        .flag-icon { width: 20px; height: 15px; border-radius: 2px; box-shadow: 0 0 2px rgba(0,0,0,0.5); object-fit: cover; }
        .lang-select { background: #222; border: 1px solid #444; color: #888; font-size: 0.7rem; font-weight: bold; padding: 2px 5px; border-radius: 6px; cursor: pointer; outline: none; }
        .lang-select:hover { color: var(--accent); border-color: var(--accent); }

        .sub-text { color: var(--text-sub); font-size: 0.95rem; margin-bottom: 2rem; font-weight: 500; line-height: 1.5; }
        
        #previewContainer { 
            width: 100%; height: 340px; 
            background: #000; 
            border-radius: var(--radius-md); 
            margin-bottom: 1.5rem; 
            border: 1px solid #333; 
            position: relative; 
            display: flex; justify-content: center; align-items: center; 
            overflow: hidden; 
            box-shadow: inset 0 0 20px rgba(0,0,0,0.5);
        }
        #previewCanvas { max-width: 100%; max-height: 100%; object-fit: contain; cursor: crosshair; position: relative; z-index: 2; }
        
        #guideText {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            color: #555; z-index: 1; pointer-events: none; padding: 20px;
            transition: opacity 0.3s;
        }
        #guideText .main-guide { font-size: 1.2rem; font-weight: 700; margin-bottom: 12px; color: #777; }
        #guideText .sub-guide { font-size: 0.85rem; line-height: 1.6; color: #555; }

        .tab-menu { 
            display: flex; align-items: center; gap: 4px; margin-bottom: 1.5rem; 
            padding: 4px; background: #151515; border-radius: 12px;
            border: 1px solid #2a2a2a;
        }
        .tab-btn { 
            flex: 1; background: transparent; border: none; color: #666; 
            font-size: 0.95rem; font-weight: 700; cursor: pointer; 
            padding: 10px; border-radius: 8px; transition: all 0.2s ease;
        }
        .tab-btn.active { color: #000; background: var(--primary); box-shadow: 0 2px 10px rgba(0, 230, 118, 0.2); }
        
        .btn-group { display: flex; gap: 10px; align-items: center; }
        
        .tab-attach, .tab-delete { 
            width: 36px; height: 36px; border-radius: 10px; 
            display: flex; justify-content: center; align-items: center; 
            cursor: pointer; font-weight: 900; font-size: 1.1rem; 
            padding: 0; line-height: 1; text-align: center;
        }
        .tab-attach { background: var(--surface); color: var(--primary); border: 1px solid #333; }
        .tab-delete { background: var(--surface); color: var(--danger); border: 1px solid #333; font-size: 0.75rem; font-weight: 800; }

        .counter-box { display: flex; flex-direction: column; justify-content: center; align-items: flex-end; margin-right: 5px; font-size: 0.65rem; color: #777; font-weight: 600; line-height: 1.2; }
        .counter-box b { color: var(--primary); font-size: 0.9rem; }

        .top-options { 
            display: flex; justify-content: center; align-items: center; gap: 15px; 
            margin-bottom: 1.5rem; background: var(--surface); padding: 12px 20px; 
            border-radius: var(--radius-md); flex-wrap: wrap; border: 1px solid var(--border);
        }
        .chk-label { display: flex; align-items: center; gap: 4px; font-size: 0.95rem; cursor: pointer; color: #ccc; }
        .chk-label input { accent-color: var(--primary); width: 18px; height: 18px; }

        .config-grid { 
            display: grid; grid-template-columns: 1fr 1fr; gap: 15px; 
            background: var(--surface); padding: 20px; border-radius: var(--radius-md); 
            margin-bottom: 1.5rem; border: 1px solid var(--border); text-align: left; 
        }
        .input-group { display: flex; flex-direction: column; gap: 8px; width: 100%; }
        label { font-size: 0.85rem; color: #888; font-weight: 700; white-space: nowrap; margin-left: 4px; }
        .input-num { background: #151515; border: 1px solid #333; color: #fff; padding: 12px; border-radius: 10px; font-weight: bold; font-size: 1.1rem; width: 100%; }

        .ratio-btns { display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; margin-top: 5px; }
        .ratio-btn { background: #333; border: 1px solid transparent; color: #aaa; font-size: 0.85rem; padding: 10px; border-radius: 8px; cursor: pointer; height: 100%; }
        .ratio-btn.active { border-color: var(--primary); color: var(--primary); background: rgba(0, 230, 118, 0.05); }
        
        .preset-btns { display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; margin-top: 5px; height: 100%; }
        .preset-btn { 
            background: #2d2d2d; border: 1px solid #444; color: #ccc; font-size: 1.1rem; padding: 15px 0; border-radius: 12px; cursor: pointer; transition: all 0.2s; display: flex; justify-content: center; align-items: center; font-weight: 800; 
        }
        .preset-btn:hover { border-color: #777; background: #383838; color: #fff; }
        .preset-btn.active { border: 2px solid var(--primary); color: #fff; background: linear-gradient(180deg, rgba(0,230,118,0.1) 0%, rgba(0,230,118,0.2) 100%); box-shadow: 0 4px 12px rgba(0,230,118,0.2); }
        .preset-btn span { display: block; }

        .action-row { display: flex; gap: 12px; margin-bottom: 1.5rem; align-items: stretch; }
        .main-btn { 
            flex: 1; padding: 22px; border-radius: var(--radius-md); border: none; 
            background: linear-gradient(135deg, #00e676, #00c853); color: #000; font-size: 1.25rem; font-weight: 900; 
            cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; box-shadow: 0 10px 30px rgba(0,230,118,0.2);
        }
        .main-btn:hover { transform: translateY(-2px); box-shadow: 0 15px 40px rgba(0,230,118,0.3); }
        
        .donation-btn {
            flex: 0 0 auto; display: flex; flex-direction: column; justify-content: center; align-items: center;
            background: #ffe812; color: #3c1e1e; padding: 0 20px; border-radius: var(--radius-md); 
            cursor: pointer; border: none; min-width: 100px; box-shadow: 0 4px 15px rgba(255, 232, 18, 0.15); transition: transform 0.2s;
        }
        .donation-btn:hover { transform: translateY(-2px); }
        .donation-icon { font-size: 1.4rem; margin-bottom: 2px; }
        .donation-text { font-size: 0.8rem; font-weight: 800; line-height: 1.2; }

        .business-box { margin-top: 1.5rem; background: #0f0f0f; border-radius: var(--radius-md); padding: 15px; border: 1px solid #222; text-align: center; color: #555; font-size: 0.85rem; font-weight: 600; }

        .revenue-group { margin-top: 0; display: flex; justify-content: center; width: 100%; overflow: hidden; }
        .ad-banner { flex: 0 0 auto; width: 100%; max-width: 100%; min-height: 100px; background: transparent; border-radius: 12px; overflow: hidden; border: 1px solid #333; display: flex; justify-content: center; align-items: center; }

        .qr-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 20000; justify-content: center; align-items: center; backdrop-filter: blur(8px); }
        .qr-modal.active { display: flex; animation: fadeIn 0.2s ease-out; }
        .qr-box { background: #fff; padding: 30px; border-radius: 24px; text-align: center; max-width: 340px; width: 90%; box-shadow: 0 20px 50px rgba(0,0,0,0.5); position: relative; }
        .qr-img { width: 100%; height: auto; display: block; border-radius: 12px; border: 1px solid #eee; }
        .close-qr { margin-top: 20px; padding: 14px 0; width: 100%; background: #222; color: #fff; border: none; border-radius: 12px; cursor: pointer; font-weight: bold; }
        
        .info-container {
            width: 95%; max-width: 620px;
            color: #888; text-align: left;
            margin-bottom: 50px;
        }
        .info-section {
            background: #181818;
            border: 1px solid #2a2a2a;
            border-radius: var(--radius-md);
            padding: 2rem;
            margin-bottom: 2rem;
        }
        .info-title { color: var(--primary); font-size: 1.1rem; font-weight: 800; margin-bottom: 1rem; display: flex; align-items: center; gap: 8px; }
        .info-text { font-size: 0.9rem; line-height: 1.7; margin-bottom: 1rem; color: #aaa; }
        .info-text strong { color: #ddd; }
        .feature-list { list-style: none; padding: 0; margin: 0; }
        .feature-list li { margin-bottom: 10px; position: relative; padding-left: 15px; font-size: 0.9rem; }
        .feature-list li::before { content: 'â€¢'; color: var(--primary); position: absolute; left: 0; font-weight: bold; }
        
        .footer-links { text-align: center; margin-top: 20px; font-size: 0.8rem; }
        .footer-links span { cursor: pointer; color: #555; text-decoration: underline; margin: 0 10px; }
        .footer-links span:hover { color: var(--primary); }
        
        .policy-content { max-height: 60vh; overflow-y: auto; text-align: left; font-size: 0.85rem; color: #333; line-height: 1.6; padding: 10px; background: #f9f9f9; border-radius: 8px; margin-top: 15px; }

        /* [ì‹ ê·œ: ì œë¯¸ë‚˜ì´ í”„ë¡¬í”„íŠ¸ ì„¹ì…˜ ìŠ¤íƒ€ì¼] */
        .gemini-section {
            background: linear-gradient(135deg, #1e1e1e 0%, #151515 100%);
            border: 1px solid #333;
            border-radius: var(--radius-lg);
            padding: 2rem;
            margin-bottom: 2rem;
            width: 95%;
            max-width: 620px;
            text-align: center;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        .gemini-title { color: var(--gem-accent); font-size: 1.2rem; font-weight: 900; margin-bottom: 1rem; letter-spacing: -0.5px; }
        .gemini-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 1.5rem; }
        .gem-btn {
            background: #252525; border: 1px solid #444; color: #eee; padding: 15px 10px; border-radius: 12px;
            cursor: pointer; font-size: 0.85rem; font-weight: 700; transition: all 0.2s;
            display: flex; flex-direction: column; gap: 5px; align-items: center;
        }
        .gem-btn:hover { border-color: var(--gem-accent); background: rgba(66, 133, 244, 0.05); transform: translateY(-2px); }
        .gem-btn .icon { font-size: 1.4rem; }
        .gem-tip-box {
            background: #0f0f0f; border-left: 4px solid var(--gem-accent); padding: 12px; text-align: left;
            border-radius: 0 8px 8px 0; font-size: 0.8rem; color: #999; line-height: 1.6;
        }
        .gem-tip-box strong { color: var(--gem-accent); display: block; margin-bottom: 4px; font-size: 0.85rem; }

        /* í”„ë¡¬í”„íŠ¸ ë³µì‚¬ ëª¨ë‹¬ ë‚´ë¶€ ìŠ¤íƒ€ì¼ */
        .prompt-view { background: #111; color: #00e676; padding: 15px; border-radius: 12px; font-family: monospace; font-size: 0.85rem; text-align: left; margin: 15px 0; white-space: pre-wrap; border: 1px solid #333; max-height: 300px; overflow-y: auto; }
        .copy-btn { width: 100%; padding: 12px; background: var(--gem-accent); color: white; border: none; border-radius: 10px; font-weight: 800; cursor: pointer; margin-bottom: 10px; }
        .copy-btn:active { opacity: 0.8; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

<div class="container" id="mainContainer">
    <div id="dropOverlay"></div> 
    
    <div class="header-wrap">
        <h1>Animo Pixel Master</h1>
        <div class="lang-wrapper">
            <img id="currentFlag" src="https://flagcdn.com/24x18/kr.png" alt="KR" class="flag-icon">
            <select class="lang-select" onchange="changeLanguage(this.value)">
                <option value="ko">KO</option>
                <option value="en">EN</option>
                <option value="cn">CN</option>
                <option value="jp">JP</option>
            </select>
        </div>
    </div>

    <p class="sub-text" data-i18n="sub">í™”ì§ˆ ì €í•˜ ì—†ëŠ” ì œë¯¸ë‚˜ì´ ì›Œí„°ë§ˆí¬ ì œê±°<br>ê³ ì„±ëŠ¥ ì´ë¯¸ì§€ ë¶„í• ê³¼ ì´ë¯¸ì§€ ì••ì¶•</p>

    <div id="previewContainer">
        <div id="guideText">
            <div class="main-guide" data-i18n="guide_m">ì´ë¯¸ì§€ë¥¼ ì´ê³³ì— ë“œë˜ê·¸ í•˜ê±°ë‚˜<br>+ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”</div>
            <div class="sub-guide">
                <span data-i18n="guide_s">ì›Œí„°ë§ˆí¬ ì‚­ì œëŠ” ì œë¯¸ë‚˜ì´ë§Œ ì§€ì›í•©ë‹ˆë‹¤.<br>ìë™ ì €ì¥ ì²´í¬ì‹œ ë“œë˜ê·¸ë§Œìœ¼ë¡œ ìë™ ì €ì¥ë©ë‹ˆë‹¤.</span>
                <div id="mobileGuide" style="color:#00e676; font-weight:bold; margin-top:8px;"></div>
            </div>
        </div>
        <canvas id="previewCanvas" style="display:none;" 
            onmousedown="handleStart(event)" onmousemove="handleMove(event)" onmouseup="handleEnd()" onmouseleave="handleEnd()"
            ontouchstart="handleStart(event)" ontouchmove="handleMove(event)" ontouchend="handleEnd()">
        </canvas>
    </div>

    <div class="tab-menu">
        <button class="tab-btn active" id="tabSplit" onclick="switchTab('split')" data-i18n="tab_split">ì´ë¯¸ì§€ ë¶„í• </button>
        <button class="tab-btn" id="tabCrop" onclick="switchTab('crop')" data-i18n="tab_crop">ì´ë¯¸ì§€ ì••ì¶•</button>
        <div class="tab-spacer"></div>
        <div class="btn-group">
            <div class="counter-box">
                <span data-i18n="visitors">Today's Visitors</span>
                <b id="cntVisit">0</b>
            </div>
            <div class="tab-delete" onclick="clearFiles()">Del</div>
            <label for="fileInput" class="tab-attach">+</label>
        </div>
    </div>

    <div class="top-options">
        <label class="chk-label" id="wmOption"><input type="checkbox" id="wmCheck"><span data-i18n="wm">ì›Œí„°ë§ˆí¬ ì œê±°</span></label>
        <label class="chk-label"><input type="checkbox" id="autoCheck"><span data-i18n="auto">ìë™ ì €ì¥</span></label>
        <label class="chk-label" id="freeOption"><input type="checkbox" id="freeCheck" onchange="toggleFreeMode()"><span data-i18n="free">ì§ì ‘ ì¡°ì ˆ</span></label>
    </div>

    <div id="splitPanel" class="config-grid" style="grid-template-columns: repeat(3, 1fr);">
        <div class="input-group"><label data-i18n="row">ê°€ë¡œ ì¹¸</label><input type="number" id="rowInput" class="input-num" value="1" min="1" oninput="resetGridPositions()"></div>
        <div class="input-group"><label data-i18n="col">ì„¸ë¡œ ì¹¸</label><input type="number" id="colInput" class="input-num" value="1" min="1" oninput="resetGridPositions()"></div>
        <div class="input-group"><label data-i18n="border">í…Œë‘ë¦¬ ìë¥´ê¸°(%)</label><input type="number" id="cropInput" class="input-num" value="0.5" step="0.1" oninput="drawVisualizer()"></div>
    </div>

    <div id="cropPanel" class="config-grid" style="display: none;">
        <div class="input-group">
            <label data-i18n="cut_ratio">ìë¥´ëŠ” ë¹„ìœ¨ ì„ íƒ</label>
            <div class="ratio-btns">
                <button class="ratio-btn active" id="btnFull" onclick="setFixedRatio('full')" data-i18n="full">ì›ë³¸ ì „ì²´</button>
                <button class="ratio-btn" id="btnFree" onclick="setFixedRatio('free')" data-i18n="free_trans">ììœ  ë³€í˜•</button>
                <button class="ratio-btn" id="btn16" onclick="setFixedRatio(16/9)">16:9</button>
                <button class="ratio-btn" id="btn9" onclick="setFixedRatio(9/16)">9:16</button>
                <button class="ratio-btn" id="btnCustom" onclick="setFixedRatio('custom')" data-i18n="custom">ë¹„ìœ¨ ì…ë ¥</button>
                <div style="display: flex; gap: 2px;">
                    <input type="number" id="ratioW" class="input-num" value="1" min="1" disabled oninput="setRatioFromInput()" style="padding: 4px; font-size: 0.8rem; text-align: center;">
                    <input type="number" id="ratioH" class="input-num" value="1" min="1" disabled oninput="setRatioFromInput()" style="padding: 4px; font-size: 0.8rem; text-align: center;">
                </div>
            </div>
        </div>
        <div class="input-group">
            <label data-i18n="target_cap">ì›í•˜ëŠ” íŒŒì¼ ìš©ëŸ‰ (ìë™ ë§ì¶¤)</label>
            <div class="preset-btns">
                <button class="preset-btn" id="p500" onclick="setTargetMB(0.5, this)"><span data-i18n="p500">500KB ì´í•˜</span></button>
                <button class="preset-btn" id="p1" onclick="setTargetMB(1.0, this)"><span data-i18n="p1">1MB ì´í•˜</span></button>
                <button class="preset-btn" id="p2" onclick="setTargetMB(2.0, this)"><span data-i18n="p2">2MB ì´í•˜</span></button>
                <button class="preset-btn active" id="p5" onclick="setTargetMB(5.0, this)"><span data-i18n="p5">5MB ì´í•˜</span></button>
            </div>
        </div>
    </div>

    <div class="action-row">
        <div class="donation-btn" onclick="handleDonation()">
            <span class="donation-icon">â˜•</span>
            <span class="donation-text">ê°œë°œìì—ê²Œ<br>ì»¤í”¼ ì˜ê¸°</span>
        </div>
        <button class="main-btn" id="downloadBtn" onclick="executeAction()" data-i18n="down">ë‹¤ìš´ë¡œë“œ</button>
    </div>

    <input type="file" id="fileInput" multiple accept="image/jpeg,image/png,image/webp,image/gif,image/*" style="display:none;" onchange="handleFiles(this.files)">

    <div class="revenue-group">
        <div class="ad-banner" id="bannerBox">
            <script src="https://ads-partners.coupang.com/g.js"></script>
            <script>
                (function() {
                    const isMob = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
                    if (isMob) {
                        new PartnersCoupang.G({"id":963994,"trackingCode":"AF6557483","subId":null,"template":"carousel","width":"320","height":"100"});
                    } else {
                        new PartnersCoupang.G({"id":944285,"trackingCode":"AF6557483","subId":null,"template":"carousel","width":"580","height":"100"});
                    }
                })();
            </script>
        </div>
    </div>

    <div class="business-box"><span data-i18n="business">ë¹„ì§€ë‹ˆìŠ¤ ë¬¸ì˜</span> two5200@gmail.com</div>
</div>

<div class="gemini-section">
    <div class="gemini-title">âœ¨ Gemini Gems Prompt: 3ë¶„í•  ë ˆì´ì•„ì›ƒ ìƒì„±ê¸°</div>
    <div class="gemini-grid">
        <button class="gem-btn" onclick="showPrompt('stack')">
            <span class="icon">ğŸš¥</span>
            <span>ê°€ë¡œ 16:9 3ì¥<br>(ìˆ˜ì§ ë‚˜ì—´í˜•)</span>
        </button>
        <button class="gem-btn" onclick="showPrompt('side')">
            <span class="icon">ğŸ–¼ï¸</span>
            <span>ì„¸ë¡œ 9:16 3ì¥<br>(ê°€ë¡œ ë‚˜ì—´í˜•)</span>
        </button>
    </div>
    <div class="gem-tip-box">
        <strong>ğŸ’¡ ë©€í‹° í”„ë ˆì„ ìƒì„±ì„ ìœ„í•œ í”„ë¡¬í”„íŠ¸ êµ¬ì¡°í™” ì „ëµ</strong>
        ìµœì ì˜ ê²°ê³¼ë¬¼ì„ ì–»ìœ¼ë ¤ë©´, 3ê°œì˜ í”„ë¡¬í”„íŠ¸ë¥¼ <u>ì¤„ë°”ê¿ˆ(Line Break)ìœ¼ë¡œ êµ¬ë¶„</u>í•˜ì—¬ ì…ë ¥í•˜ê±°ë‚˜, ë‹¨ì¼ í”„ë¡¬í”„íŠ¸ ëì— <u>'3-panel layout' ë˜ëŠ” 'Triptych style'</u> í‚¤ì›Œë“œë¥¼ ë³‘ê¸°í•˜ëŠ” ê²ƒì´ íš¨ê³¼ì ì…ë‹ˆë‹¤.
    </div>
</div>

<div class="info-container">
    <div class="info-section">
        <div class="info-title">ğŸš€ Development Story: ì™œ ë§Œë“¤ì—ˆë‚˜ìš”?</div>
        <div class="info-text">
            ì œë¯¸ë‚˜ì´(Gemini)ì˜ ì´ë¯¸ì§€ ìƒì„± ëŠ¥ë ¥ì€ ì••ë„ì ì´ì§€ë§Œ, í•œ ë²ˆì— í•œ ì¥ì”© ë½‘ìœ¼ë ¤ë©´ ëŒ€ê¸° ì‹œê°„ì´ ê¸¸ì–´ì§€ê³¤ í•©ë‹ˆë‹¤. 
            ì €ëŠ” ì—¬ê¸°ì„œ <strong>'í•˜ë‚˜ì˜ ë ˆì´ì•„ì›ƒì— ì—¬ëŸ¬ í”„ë¡¬í”„íŠ¸ë¥¼ ë„£ì–´ ë‹¤ìˆ˜ì˜ ì´ë¯¸ì§€ë¥¼ í•œ ë²ˆì— ìƒì„±í•˜ëŠ” íŒ'</strong>ì„ í™œìš©í•´ ìƒì‚°ì„±ì„ ê·¹ëŒ€í™”í•´ ì™”ìŠµë‹ˆë‹¤.
        </div>
        <div class="info-text">
            í•˜ì§€ë§Œ ì´ë ‡ê²Œ ìƒì„±ëœ ê²°ê³¼ë¬¼ì„ ì¼ì¼ì´ ì›Œí„°ë§ˆí¬ë¥¼ ì§€ìš°ê³  ìˆ˜ë™ìœ¼ë¡œ ìë¥´ëŠ” ì‘ì—…ì€ ë§¤ìš° ë²ˆê±°ë¡œì› ìŠµë‹ˆë‹¤. 
            ê·¸ë˜ì„œ <strong>ì›Œí„°ë§ˆí¬ ì œê±°ì™€ ì´ë¯¸ì§€ ë¶„í• ì„ ë‹¨ í•œ ë²ˆì˜ ë“œë˜ê·¸ë¡œ ìë™í™”</strong>í•  ìˆ˜ ìˆëŠ” ë„êµ¬ë¥¼ ì§ì ‘ ê°œë°œí•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. 
            ì´ë¯¸ì§€ ìµœì í™”ê°€ í•„ìš”í•œ ëª¨ë“  ì œë¯¸ë‚˜ì´ ì‚¬ìš©ìë“¤ì´ ì €ì²˜ëŸ¼ ì°½ì‘ì—ë§Œ ì§‘ì¤‘í•  ìˆ˜ ìˆê¸°ë¥¼ ë°”ëë‹ˆë‹¤.
        </div>
    </div>
    <div class="info-section">
        <div class="info-title">âœ¨ Animo Pixel Masterì˜ íŠ¹ì§•</div>
        <ul class="feature-list">
            <li><strong>ê°•ë ¥í•œ ë³´ì•ˆ:</strong> ëª¨ë“  ì´ë¯¸ì§€ ì²˜ë¦¬ëŠ” ì‚¬ìš©ìì˜ ë¸Œë¼ìš°ì €(Client-side)ì—ì„œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. ê°œì¸ì •ë³´ ìœ ì¶œ ê±±ì •ì´ ì—†ìŠµë‹ˆë‹¤.</li>
            <li><strong>ìŠ¤ë§ˆíŠ¸ ìš©ëŸ‰ ì••ì¶•:</strong> ì´ì§„ íƒìƒ‰ ì•Œê³ ë¦¬ì¦˜ì´ íŠ¹ì • ìš©ëŸ‰(ì˜ˆ: 5MB)ì— ë§ì¶° ìµœì ì˜ í™”ì§ˆì„ ìë™ìœ¼ë¡œ ì°¾ì•„ ì••ì¶•í•©ë‹ˆë‹¤.</li>
            <li><strong>ì¸ìŠ¤íƒ€ê·¸ë¨ ìµœì í™”:</strong> ê°€ë¡œ/ì„¸ë¡œ ì¹¸ ìˆ˜ë§Œ ì…ë ¥í•˜ë©´ í”¼ë“œì— ë”± ë§ëŠ” ê·¸ë¦¬ë“œ ì´ë¯¸ì§€ë¡œ ì¦‰ì‹œ ë¶„í•  ì €ì¥ë©ë‹ˆë‹¤.</li>
        </ul>
    </div>

    <div class="info-section">
        <div class="info-title">ğŸ’¡ ì‚¬ìš© ê°€ì´ë“œ (FAQ)</div>
        <div class="info-text">
            <strong>Q. ì œë¯¸ë‚˜ì´ ì›Œí„°ë§ˆí¬ëŠ” ì–´ë–»ê²Œ ì§€ìš°ë‚˜ìš”?</strong><br>
            ì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì˜¨ í›„ ìƒë‹¨ì˜ [ì›Œí„°ë§ˆí¬ ì œê±°]ë¥¼ ì²´í¬í•˜ê³  ë‹¤ìš´ë¡œë“œí•˜ì„¸ìš”. AIê°€ ìƒì„±í•œ íŠ¹ì • íŒ¨í„´ì„ ì¸ì‹í•´ í”½ì…€ ë‹¨ìœ„ë¡œ ë³µì›í•©ë‹ˆë‹¤.
        </div>
        <div class="info-text">
            <strong>Q. ëª¨ë°”ì¼ì—ì„œë„ ê°€ëŠ¥í•œê°€ìš”?</strong><br>
            ë„¤, ë°˜ì‘í˜• ë””ìì¸ìœ¼ë¡œ ìŠ¤ë§ˆíŠ¸í°ì—ì„œë„ 100% í™œìš© ê°€ëŠ¥í•©ë‹ˆë‹¤. ë³´ì•ˆ ì •ì±…ìƒ ëª¨ë°”ì¼ì—ì„œëŠ” í•œ ì¥ì”© ìˆœì°¨ì ìœ¼ë¡œ ë‹¤ìš´ë¡œë“œë©ë‹ˆë‹¤.
        </div>
    </div>

    <div class="footer-links">
        <span onclick="openPolicy('privacy')">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</span> | 
        <span onclick="openPolicy('terms')">ì´ìš©ì•½ê´€</span> | 
        <span>Copyright Â© 2026 Animo. All rights reserved.</span>
    </div>
</div>

<div id="promptModal" class="qr-modal">
    <div class="qr-box" style="max-width: 500px; background: #1e1e1e; color: white;">
        <h3 id="promptTitle" style="color: var(--gem-accent);">í”„ë¡¬í”„íŠ¸ ì•ˆë‚´</h3>
        <p style="font-size: 0.8rem; color: #888; margin-top: -10px;">ì´ í”„ë¡¬í”„íŠ¸ë¥¼ ì œë¯¸ë‚˜ì´ Gems ì„¤ì •ì´ë‚˜ ëŒ€í™”ì°½ì— ë³µì‚¬í•´ ë„£ìœ¼ì„¸ìš”.</p>
        <div class="prompt-view" id="promptText"></div>
        <button class="copy-btn" id="btnCopyPrompt" onclick="copyPrompt()">í”„ë¡¬í”„íŠ¸ ë³µì‚¬í•˜ê¸°</button>
        <button class="close-qr" onclick="closePrompt()" style="background: #333;">ë‹«ê¸°</button>
    </div>
</div>

<div id="qrModal" class="qr-modal">
    <div class="qr-box">
        <h3>â˜• ì¹´ë©”ë¼ë¡œ ìŠ¤ìº”í•´ì£¼ì„¸ìš”</h3>
        <img src="https://github.com/two5220/assets/blob/main/kakao_qr.png?raw=true" alt="KakaoPay QR" class="qr-img">
        <button class="close-qr" onclick="closeQr()">ë‹«ê¸°</button>
    </div>
</div>

<div id="policyModal" class="qr-modal">
    <div class="qr-box" style="max-width: 500px;">
        <h3 id="policyTitle">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</h3>
        <div class="policy-content" id="policyText"></div>
        <button class="close-qr" onclick="closePolicy()">ë‹«ê¸°</button>
    </div>
</div>

<script>
    /* [ê¸°ì¡´ ë¡œì§ ìœ ì§€ - ì½”ë“œ ë™ì¼] */
    const FIX_X = 64, FIX_Y = 64, MASK_URL = "https://raw.githubusercontent.com/two5220/assets/refs/heads/main/mask.png";
    let maskImg = new Image(), maskData = null, maskW = 0, maskH = 0, previewImg = null, originalFile = null;
    let currentTab = 'split', colPos = [], rowPos = [], gridBox = { x1: 0, y1: 0, x2: 1, y2: 1 }, cropBox = { x: 0, y: 0, w: 1, h: 1 };
    let fixedRatio = 'full', splitRatioSetting = 'free', draggingIdx = -1, draggingType = null, currentTargetMB = 5.0, dragStartGrid = null;
    const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
    let mobileSplitIdx = 0; 
    const MAX_MOBILE_SPLIT = 50; 

    // [ì œë¯¸ë‚˜ì´ í”„ë¡¬í”„íŠ¸ ë°ì´í„°]
    const prompts = {
        stack: `ì—­í•  ë° ëª©í‘œ:
* ì‚¬ìš©ìê°€ ì œê³µí•œ íŠ¹ì • ì£¼ì œë‚˜ 3ê°€ì§€ ê°œë³„ í”„ë¡¬í”„íŠ¸ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì ˆëŒ€ì  16:9 ê°€ë¡œ ë¹„ìœ¨ì˜ ì´ë¯¸ì§€ 3ì¥ì„ ìˆ˜ì§ìœ¼ë¡œ ë‚˜ì—´í•œ ë‹¨ì¼ ë ˆì´ì•„ì›ƒ ì´ë¯¸ì§€ë¥¼ ê¸°íší•˜ê³  ìƒì„±í•œë‹¤.
* ê° ì˜ì—­(1êµ¬ì—­, 2êµ¬ì—­, 3êµ¬ì—­)ì— ëŒ€í•´ ì¼ê´€ì„± ìˆëŠ” ìŠ¤íƒ€ì¼ì´ë‚˜ ì§€ì‹œëœ ê°œë³„ ë‚´ìš©ì„ ì¶©ì‹¤íˆ ë°˜ì˜í•œë‹¤.
* í•˜ë‚˜ì˜ ì˜ì—­ì˜ ì´ë¯¸ì§€ëŠ” ë‹¤ë¥¸ ë ˆì´ì•„ì›ƒ ì˜ì—­ì„ ì¹¨ë²”í•˜ì§€ ì•Šë„ë¡ ì—„ê²©íˆ êµ¬ë¶„í•˜ë©°, ì´ë¯¸ì§€ êµ¬ë¶„ ê²½ê³„ì„ ì´ë‚˜ ë°”ê¹¥ í…Œë‘ë¦¬ê°€ ì—†ëŠ” ë§¤ë„ëŸ¬ìš´ ì—°ê²°ì„ ì§€í–¥í•©ë‹ˆë‹¤.
* ìƒì„±ëœ ì´ë¯¸ì§€ë¥¼ í¬ë¡­í•  ê²ƒì´ê¸° ë•Œë¬¸ì— ìƒì„±ê°€ëŠ¥í•œ ìµœê³ í•´ìƒë„ë¡œ ì œê³µí•œë‹¤.

í–‰ë™ ì§€ì¹¨ ë° ê·œì¹™:
1) ì…ë ¥ ì²˜ë¦¬:
 a) ì‚¬ìš©ìê°€ ë‹¨ì¼ ì£¼ì œë§Œ ì œê³µí•  ê²½ìš°, ê·¸ ì£¼ì œë¥¼ ë°”íƒ•ìœ¼ë¡œ ì„œë¡œ ë³´ì™„ì ì¸ 3ê°€ì§€ ì„¸ë¶€ ì¥ë©´ì„ ìŠ¤ìŠ¤ë¡œ êµ¬ìƒí•˜ì—¬ í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•œë‹¤.
 b) ì‚¬ìš©ìê°€ 3ê°€ì§€ì˜ êµ¬ì²´ì ì¸ í”„ë¡¬í”„íŠ¸ë¥¼ ì œê³µí•  ê²½ìš°, ê° í”„ë¡¬í”„íŠ¸ë¥¼ 1êµ¬ì—­, 2êµ¬ì—­, 3êµ¬ì—­ì— ìˆœì„œëŒ€ë¡œ ë°°ì •í•˜ì—¬ ì´ë¯¸ì§€ë¥¼ êµ¬ì„±í•œë‹¤.

2) ì´ë¯¸ì§€ êµ¬ì„± ë° í’ˆì§ˆ ì œì–´:
 a) ê²°ê³¼ë¬¼ì€ ë°˜ë“œì‹œ ê°€ë¡œ 16:9 ë¹„ìœ¨ì˜ ì´ë¯¸ì§€ 3ì¥ì´ ìœ„ì—ì„œ ì•„ë˜ë¡œ ì´ì–´ì§€ëŠ” ìˆ˜ì§ 3ë‹¨ êµ¬ì„±ì´ì–´ì•¼ í•œë‹¤.
 b) ì‹œê°ì  ì—°ì†ì„±ì„ ìœ ì§€í•˜ê±°ë‚˜ ì‚¬ìš©ìì˜ ì˜ë„ì— ë”°ë¼ ëª…í™•íˆ êµ¬ë¶„ëœ 3ê°€ì§€ ì‹œê° ì •ë³´ë¥¼ ì œê³µí•œë‹¤.
 c) ìµœì¢… ê²°ê³¼ë¬¼ì€ í•˜ë‚˜ì˜ ì´ë¯¸ì§€ íŒŒì¼ ë‚´ì— 3ê°œì˜ í”„ë ˆì„ì´ í¬í•¨ëœ í˜•íƒœì—¬ì•¼ í•œë‹¤.
 d) ì´ë¯¸ì§€ ë‚´ì— '1êµ¬ì—­', '2êµ¬ì—­', '3êµ¬ì—­'ê³¼ ê°™ì€ í…ìŠ¤íŠ¸ ë¼ë²¨ì„ í‘œì‹œí•˜ì§€ ì•ŠëŠ”ë‹¤.

3) ì¶œë ¥ ìƒì„±:
 a) ì´ë¯¸ì§€ë¥¼ ìƒì„±í•˜ê¸° ì „, ì‚¬ìš©ìì—ê²Œ ìƒì„±í•  3ê°€ì§€ ì¥ë©´ì— ëŒ€í•œ ë¬˜ì‚¬ë¥¼ ê°„ëµíˆ ì„¤ëª…í•œë‹¤.
 b) @DALL-E ë˜ëŠ” ì ì ˆí•œ ì´ë¯¸ì§€ ìƒì„± ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ìš”ì²­ëœ ë ˆì´ì•„ì›ƒì„ ìƒì„±í•œë‹¤.

ë§íˆ¬ ë° í†¤:
* ì „ë¬¸ì ì´ê³  ì°½ì˜ì ì¸ ì´ë¯¸ì§€ ì œì‘ ë„ìš°ë¯¸ì˜ í†¤ì„ ìœ ì§€í•œë‹¤.
* ì‚¬ìš©ìì˜ ìš”ì²­ ì‚¬í•­ì„ ì •í™•íˆ ì´í•´í–ˆìŒì„ ì•Œë¦¬ê³ , ìƒì„±ë  ì´ë¯¸ì§€ì˜ êµ¬ì„± ìš”ì†Œë¥¼ ê°„ëµíˆ ì„¤ëª…í•œë‹¤.
* ê°„ê²°í•˜ê³  ëª…í™•í•œ í•œêµ­ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì†Œí†µí•œë‹¤.`,

        side: `ëª©ì  ë° ëª©í‘œ:
* ì‚¬ìš©ìê°€ ì œê³µí•œ ì£¼ì œë‚˜ 3ê°œì˜ í”„ë¡¬í”„íŠ¸ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì„¸ë¡œ ë¹„ìœ¨(9:16) ì´ë¯¸ì§€ 3ì¥ì´ ê°€ë¡œë¡œ ë‚˜ë€íˆ ë°°ì¹˜ëœ ë‹¨ì¼ ì´ë¯¸ì§€ ë ˆì´ì•„ì›ƒ(16:9 ê°€ë¡œí˜•)ì„ êµ¬ì„±í•˜ëŠ” 'ì„¸ë¡œ ë¹„ìœ¨ 3ì¥ ë ˆì´ì•„ì›ƒ' ì „ë¬¸ê°€ ì—­í• ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
* ë‹¨ì¼ ì£¼ì œê°€ ì£¼ì–´ì§€ë©´ ê·¸ì— ë§ëŠ” 3ê°€ì§€ ì¥ë©´ì„ ìŠ¤ìŠ¤ë¡œ êµ¬ìƒí•˜ì—¬ ì¼ê´€ì„± ìˆëŠ” ë ˆì´ì•„ì›ƒì„ ë§Œë“­ë‹ˆë‹¤.
* 3ê°œì˜ ê°œë³„ í”„ë¡¬í”„íŠ¸ê°€ ì£¼ì–´ì§€ë©´ ê° í”„ë¡¬í”„íŠ¸ì˜ ë‚´ìš©ì„ ì¶©ì‹¤íˆ ë°˜ì˜í•˜ì—¬ 3ë¶„í•  ë ˆì´ì•„ì›ƒì— í‘œí˜„í•©ë‹ˆë‹¤.
* í•˜ë‚˜ì˜ ì˜ì—­ì˜ ì´ë¯¸ì§€ëŠ” ë‹¤ë¥¸ ë ˆì´ì•„ì›ƒ ì˜ì—­ì„ ì¹¨ë²”í•˜ì§€ ì•Šë„ë¡ ì—„ê²©íˆ êµ¬ë¶„í•˜ë©°, ì´ë¯¸ì§€ êµ¬ë¶„ ê²½ê³„ì„ ì´ë‚˜ ë°”ê¹¥ í…Œë‘ë¦¬ê°€ ì—†ëŠ” ë§¤ë„ëŸ¬ìš´ ì—°ê²°ì„ ì§€í–¥í•©ë‹ˆë‹¤.
* ìƒì„±ëœ ì´ë¯¸ì§€ë¥¼ í¬ë¡­í•  ê²ƒì´ê¸° ë•Œë¬¸ì— ìƒì„±ê°€ëŠ¥í•œ ìµœê³ í•´ìƒë„ë¡œ ì œê³µí•œë‹¤.

í–‰ë™ ì§€ì¹¨ ë° ê·œì¹™:
1) ì´ë¯¸ì§€ êµ¬ì„± ë°©ì‹:
 a) ìƒì„±ë˜ëŠ” ëª¨ë“  ì´ë¯¸ì§€ì˜ ìµœì¢… ë¹„ìœ¨ì€ ë°˜ë“œì‹œ 16:9 (ê°€ë¡œí˜•) ë ˆì´ì•„ì›ƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.
 b) ì´ë¯¸ì§€ ìƒì„± í”„ë¡¬í”„íŠ¸ì— 'A triptych of three distinct vertical panels', 'Three vertical frames side-by-side', '3-panel layout', 'borderless'ì™€ ê°™ì€ í‚¤ì›Œë“œë¥¼ í¬í•¨í•˜ì—¬ ì„¸ í­ ì œë‹¨í™” í˜•ì‹ì„ ìœ ì§€í•©ë‹ˆë‹¤.
 c) ê° íŒ¨ë„ì€ ì„œë¡œ ë‹¤ë¥¸ ë‚´ìš©ì„ ë‹´ê³  ìˆë”ë¼ë„ ì „ì²´ì ìœ¼ë¡œ ì¡°í™”ë¡œìš´ ë¶„ìœ„ê¸°, ì¡°ëª…, ìƒ‰ê°ì„ ìœ ì§€í•˜ì—¬ í†µì¼ê°ì„ ì¤ë‹ˆë‹¤.
 d) ê° ì„¸ë¡œ íŒ¨ë„ ì‚¬ì´ì˜ ë‚´ìš©ì´ ì„ì´ì§€ ì•Šë„ë¡ í•˜ë˜, ë¬¼ë¦¬ì ì¸ ì„ (border)ì€ ìƒì„±í•˜ì§€ ì•Šë„ë¡ ì§€ì‹œí•©ë‹ˆë‹¤.

2) ì…ë ¥ ì²˜ë¦¬:
 a) ì‚¬ìš©ìê°€ ë‹¨ì¼ í‚¤ì›Œë“œë‚˜ ì£¼ì œë§Œ ì œê³µí•  ê²½ìš°, ì„œì‚¬ì  íë¦„ì´ë‚˜ ì‹œê°ì  ëŒ€ë¹„ë¥¼ ê³ ë ¤í•œ ì„¸ ê°€ì§€ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì œì•ˆí•˜ê³  ë ˆì´ì•„ì›ƒì„ êµ¬ì„±í•©ë‹ˆë‹¤.
 b) ì‚¬ìš©ìê°€ ì„¸ ê°œì˜ ë…ë¦½ì ì¸ í”„ë¡¬í”„íŠ¸ë¥¼ ì œê³µí•  ê²½ìš°, ì´ë¥¼ ì™¼ìª½, ì¤‘ì•™, ì˜¤ë¥¸ìª½ ì„¹ì…˜ì— ìˆœì„œëŒ€ë¡œ ë§¤ì¹­í•˜ì—¬ ì‹œê°í™”í•©ë‹ˆë‹¤.

3) ìƒí˜¸ì‘ìš© ìŠ¤íƒ€ì¼:
 a) ì‚¬ìš©ìì—ê²Œ ì‹œê°í™”í•˜ê³  ì‹¶ì€ í…Œë§ˆë‚˜ êµ¬ì²´ì ì¸ ì„¸ ê°€ì§€ ì¥ë©´ ë¬˜ì‚¬ë¥¼ ìš”ì²­í•˜ë©° ëŒ€í™”ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. 'ì•ˆë…•í•˜ì„¸ìš”! ì–´ë–¤ í…Œë§ˆë¡œ 3ë¶„í•  ë ˆì´ì•„ì›ƒ ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ì–´ ë“œë¦´ê¹Œìš”?'ì™€ ê°™ì´ ì‹œì‘í•˜ì„¸ìš”.
 b) ê²°ê³¼ë¬¼ì´ ìƒì„±ë˜ë©´ ê° íŒ¨ë„ì˜ ì˜ë„ì™€ êµ¬ì„±ì„ ì„¤ëª…í•˜ê³ , ë ˆì´ì•„ì›ƒ ë¹„ìœ¨ì´ë‚˜ ë°°ì¹˜ì— ëŒ€í•œ í”¼ë“œë°±ì„ ìš”ì²­í•©ë‹ˆë‹¤.

ì „ë°˜ì ì¸ í†¤:
* ì‹œê° ì˜ˆìˆ  ë° ë ˆì´ì•„ì›ƒ ë””ìì¸ ì „ë¬¸ê°€ë¡œì„œ ì°½ì˜ì ì´ê³  ì „ë¬¸ì ì¸ ì–´ì¡°ë¥¼ ìœ ì§€í•©ë‹ˆë‹¤.
* ì‚¬ìš©ìì˜ ì¶”ìƒì ì¸ ì•„ì´ë””ì–´ë¥¼ êµ¬ì²´ì ì¸ ì‹œê°ì  í”„ë¡¬í”„íŠ¸ë¡œ ë³€í™˜í•˜ëŠ” ë° ì ê·¹ì ì¸ ë„ì›€ì„ ì¤ë‹ˆë‹¤.`
    };

    function showPrompt(type) {
        const title = type === 'stack' ? 'ê°€ë¡œ 16:9 (ìˆ˜ì§ 3ë‹¨) í”„ë¡¬í”„íŠ¸' : 'ì„¸ë¡œ 9:16 (ê°€ë¡œ 3ì—´) í”„ë¡¬í”„íŠ¸';
        document.getElementById('promptTitle').innerText = title;
        document.getElementById('promptText').innerText = prompts[type];
        document.getElementById('promptModal').classList.add('active');
        document.getElementById('btnCopyPrompt').innerText = 'í”„ë¡¬í”„íŠ¸ ë³µì‚¬í•˜ê¸°';
    }

    function closePrompt() { document.getElementById('promptModal').classList.remove('active'); }

    function copyPrompt() {
        const text = document.getElementById('promptText').innerText;
        navigator.clipboard.writeText(text).then(() => {
            document.getElementById('btnCopyPrompt').innerText = 'âœ… ë³µì‚¬ ì™„ë£Œ!';
            setTimeout(() => { document.getElementById('btnCopyPrompt').innerText = 'í”„ë¡¬í”„íŠ¸ ë³µì‚¬í•˜ê¸°'; }, 2000);
        });
    }

    // [ê¸°ì¡´ í•¨ìˆ˜ë“¤ ê·¸ëŒ€ë¡œ ìœ ì§€]
    function updateMobileGuide() { if (!isMobile) return; const guide = document.getElementById('mobileGuide'); if (guide) guide.innerHTML = t[currentLang].guide_mobile; }
    const KAKAO_LINK = "https://qr.kakaopay.com/Ej8NXO17Z";
    function handleDonation() { if (isMobile) { window.open(KAKAO_LINK, '_blank'); } else { document.getElementById('qrModal').classList.add('active'); } }
    function closeQr() { document.getElementById('qrModal').classList.remove('active'); }
    let currentLang = 'ko';
    const flags = { ko: 'kr', en: 'us', cn: 'cn', jp: 'jp' };
    const t = {
        ko: { 
            business: "ë¹„ì§€ë‹ˆìŠ¤ ë¬¸ì˜", sub: "í™”ì§ˆ ì €í•˜ ì—†ëŠ” ì œë¯¸ë‚˜ì´ ì›Œí„°ë§ˆí¬ ì œê±°<br>ê³ ì„±ëŠ¥ ì´ë¯¸ì§€ ë¶„í• ê³¼ ì´ë¯¸ì§€ ì••ì¶•", 
            guide_m: "ì´ë¯¸ì§€ë¥¼ ì´ê³³ì— ë“œë˜ê·¸ í•˜ê±°ë‚˜<br>+ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”", 
            guide_s: "ì›Œí„°ë§ˆí¬ ì‚­ì œëŠ” ì œë¯¸ë‚˜ì´ë§Œ ì§€ì›í•©ë‹ˆë‹¤.<br>ìë™ ì €ì¥ ì²´í¬ì‹œ ë“œë˜ê·¸ë§Œìœ¼ë¡œ ìë™ ì €ì¥ë©ë‹ˆë‹¤.", 
            guide_mobile: "ëª¨ë°”ì¼ì€ ë³´ì•ˆ ì •ì±…ìƒ ë²ˆí˜¸ìˆœìœ¼ë¡œ<br>í•œ ì¥ì”© ë‹¤ìš´ë¡œë“œí•´ì•¼ í•©ë‹ˆë‹¤.",
            tab_split: "ì´ë¯¸ì§€ ë¶„í• ", tab_crop: "ì´ë¯¸ì§€ ì••ì¶•", visitors: "Today's Visitors", auto: "ìë™ ì €ì¥", wm: "ì›Œí„°ë§ˆí¬ ì œê±°", free: "ì§ì ‘ ì¡°ì ˆ", 
            col: "ì„¸ë¡œ ì¹¸", row: "ê°€ë¡œ ì¹¸", border: "í…Œë‘ë¦¬ ìë¥´ê¸°(%)", 
            cut_ratio: "ìë¥´ëŠ” ë¹„ìœ¨ ì„ íƒ", full: "ì›ë³¸ ì „ì²´", free_trans: "ììœ  ë³€í˜•", custom: "ë¹„ìœ¨ ì…ë ¥", 
            target_cap: "ì›í•˜ëŠ” íŒŒì¼ ìš©ëŸ‰ (ìë™ ë§ì¶¤)", 
            p500: "500KB ì´í•˜", p1: "1MB ì´í•˜", p2: "2MB ì´í•˜", p5: "5MB ì´í•˜", 
            down: "ë‹¤ìš´ë¡œë“œ", wait: "ì ì‹œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.",
            down_pair: "{n}ë²ˆ ë‹¤ìš´ë¡œë“œ", down_done_pair: "ì™„ë£Œ! {n}ë²ˆ ë‹¤ìš´ë¡œë“œ", all_done: "ì „ì²´ ì™„ë£Œ (ë‹¤ì‹œ ì‹œì‘)"
        }
    };
    function changeLanguage(lang) { currentLang = lang; document.querySelectorAll('[data-i18n]').forEach(el => { const key = el.getAttribute('data-i18n'); if(t[lang][key]) el.innerHTML = t[lang][key]; }); updateMobileGuide(); updateButtonText(); const flagCode = flags[lang] || 'kr'; document.getElementById('currentFlag').src = `https://flagcdn.com/24x18/${flagCode}.png`; }
    window.addEventListener('DOMContentLoaded', updateMobileGuide);
    const todayStr = new Date().toISOString().slice(0, 10);
    const savedDate = localStorage.getItem('animo_date');
    let visitCnt = parseInt(localStorage.getItem('animo_visit') || '0');
    if (savedDate !== todayStr) { visitCnt = 0; localStorage.setItem('animo_date', todayStr); }
    if (!sessionStorage.getItem('session_active')) { visitCnt++; localStorage.setItem('animo_visit', visitCnt); sessionStorage.setItem('session_active', 'true'); }
    document.getElementById('cntVisit').innerText = visitCnt;
    const mainCont = document.getElementById('mainContainer');
    window.addEventListener('dragenter', (e) => { e.preventDefault(); document.getElementById('dropOverlay').classList.add('active'); });
    window.addEventListener('dragover', (e) => { e.preventDefault(); });
    mainCont.addEventListener('dragleave', (e) => { if (e.relatedTarget === null || !mainCont.contains(e.relatedTarget)) document.getElementById('dropOverlay').classList.remove('active'); });
    window.addEventListener('drop', (e) => { e.preventDefault(); document.getElementById('dropOverlay').classList.remove('active'); if (e.dataTransfer.files.length > 0) handleFiles(e.dataTransfer.files); });
    maskImg.crossOrigin = "Anonymous";
    maskImg.onload = () => { const c = document.createElement('canvas'); c.width = maskImg.width; c.height = maskImg.height; const ctx = c.getContext('2d'); ctx.drawImage(maskImg, 0, 0); const d = ctx.getImageData(0,0,c.width,c.height).data; let minX = c.width, minY = c.height, maxX = 0, maxY = 0, found = false; for(let y=0; y<c.height; y++){ for(let x=0; x<c.width; x++){ const i = (y*c.width + x)*4; if(d[i]>15){ if(x<minX) minX = x; if(x>maxX) maxX = x; if(y<minY) minY = y; if(y>maxY) maxY = y; found = true; } } } if(found){ maskW = maxX-minX+1; maskH = maxY-minY+1; maskData = ctx.getImageData(minX, minY, maskW, maskH).data; } };
    maskImg.src = MASK_URL;
    function setTargetMB(mb, btn) { currentTargetMB = mb; document.querySelectorAll('.preset-btn').forEach(b => b.classList.remove('active')); btn.classList.add('active'); }
    function toggleFreeMode() { const isFree = document.getElementById('freeCheck').checked; if(!isFree) gridBox = { x1: 0, y1: 0, x2: 1, y2: 1 }; resetGridPositions(); drawVisualizer(); }
    function clearFiles() { previewImg = null; originalFile = null; mobileSplitIdx = 0; updateButtonText(); document.getElementById('previewCanvas').style.display = 'none'; document.getElementById('guideText').style.display = 'flex'; document.getElementById('fileInput').value = ''; }
    function switchTab(tab) { currentTab = tab; document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active')); document.getElementById(tab === 'split' ? 'tabSplit' : 'tabCrop').classList.add('active'); document.getElementById('splitPanel').style.display = tab === 'split' ? 'grid' : 'none'; document.getElementById('cropPanel').style.display = tab === 'crop' ? 'grid' : 'none'; document.getElementById('freeOption').style.display = tab === 'split' ? 'flex' : 'none'; document.getElementById('wmOption').style.display = tab === 'split' ? 'flex' : 'none'; updateButtonText(); drawVisualizer(); }
    function updateButtonText() { const btn = document.getElementById('downloadBtn'); if (isMobile && currentTab === 'split' && previewImg) { const total = parseInt(document.getElementById('colInput').value) * parseInt(document.getElementById('rowInput').value); if (mobileSplitIdx >= total) btn.innerText = t[currentLang].all_done; else { const txt = (mobileSplitIdx === 0) ? t[currentLang].down_pair : t[currentLang].down_done_pair; btn.innerText = txt.replace('{n}', mobileSplitIdx + 1); } } else btn.innerText = t[currentLang].down; }
    function setFixedRatio(mode) { fixedRatio = mode; document.querySelectorAll('.ratio-btn').forEach(b => b.classList.remove('active')); const rw = document.getElementById('ratioW'), rh = document.getElementById('ratioH'); rw.disabled = (mode !== 'custom'); rh.disabled = (mode !== 'custom'); if(mode === 'free') document.getElementById('btnFree').classList.add('active'); else if(mode === 'full') { document.getElementById('btnFull').classList.add('active'); cropBox = { x: 0, y: 0, w: 1, h: 1 }; } else if(mode === 'custom') document.getElementById('btnCustom').classList.add('active'); else if(typeof mode === 'number') { if(mode === 1) document.getElementById('btnCustom').classList.add('active'); else if(mode > 1) document.getElementById('btn16').classList.add('active'); else document.getElementById('btn9').classList.add('active'); } if(mode !== 'full') adjustCropToRatio(); else drawVisualizer(); }
    function setRatioFromInput() { const w = parseFloat(document.getElementById('ratioW').value), h = parseFloat(document.getElementById('ratioH').value); if(w > 0 && h > 0) { fixedRatio = w / h; adjustCropToRatio(); } }
    function adjustCropToRatio() { if(!previewImg || fixedRatio === 'free' || fixedRatio === 'full') { drawVisualizer(); return; } let r = 1; if(fixedRatio === 'custom') { const w = parseFloat(document.getElementById('ratioW').value) || 1; const h = parseFloat(document.getElementById('ratioH').value) || 1; r = w / h; } else r = (typeof fixedRatio === 'number') ? fixedRatio : 1; const imgRatio = previewImg.width / previewImg.height; if(r > imgRatio) { cropBox.w = 0.9; cropBox.h = (0.9 * imgRatio) / r; } else { cropBox.h = 0.9; cropBox.w = (0.9 * r) / imgRatio; } cropBox.x = (1 - cropBox.w) / 2; cropBox.y = (1 - cropBox.h) / 2; drawVisualizer(); }
    function resetGridPositions() { const cols = parseInt(document.getElementById('colInput').value), rows = parseInt(document.getElementById('rowInput').value); if (cols * rows > MAX_MOBILE_SPLIT && isMobile) { alert(`ëª¨ë°”ì¼ ìµœëŒ€ ${MAX_MOBILE_SPLIT}ë¶„í•  ì§€ì›.`); document.getElementById('colInput').value = 1; document.getElementById('rowInput').value = 1; return; } colPos = []; rowPos = []; for(let i=1; i<cols; i++) colPos.push(i/cols); for(let i=1; i<rows; i++) rowPos.push(i/rows); mobileSplitIdx = 0; updateButtonText(); drawVisualizer(); }
    async function handleFiles(files) { const valid = Array.from(files).filter(f => f.type.startsWith('image/')); if(!valid.length) return; originalFile = valid[0]; const reader = new FileReader(); reader.onload = (e) => { previewImg = new Image(); previewImg.onload = async () => { document.getElementById('previewCanvas').style.display = 'block'; document.getElementById('guideText').style.display = 'none'; resetGridPositions(); if(document.getElementById('autoCheck').checked) { for(let file of valid.slice(0, 20)) await executeAction(file); } }; previewImg.src = e.target.result; }; reader.readAsDataURL(originalFile); }
    function drawVisualizer() { if(!previewImg) return; const canvas = document.getElementById('previewCanvas'), ctx = canvas.getContext('2d'); canvas.width = previewImg.naturalWidth; canvas.height = previewImg.naturalHeight; ctx.drawImage(previewImg, 0, 0); const cropP = parseFloat(document.getElementById('cropInput').value) / 100; if(currentTab === 'split') { const isFree = document.getElementById('freeCheck').checked, x1 = gridBox.x1 * canvas.width, y1 = gridBox.y1 * canvas.height, x2 = gridBox.x2 * canvas.width, y2 = gridBox.y2 * canvas.height, gw = x2 - x1, gh = y2 - y1, fCols = [0, ...colPos, 1], fRows = [0, ...rowPos, 1]; if(isFree) { ctx.fillStyle = "rgba(0,0,0,0.5)"; ctx.fillRect(0,0,canvas.width, y1); ctx.fillRect(0,y2,canvas.width, canvas.height-y2); ctx.fillRect(0,y1,x1,y2-y1); ctx.fillRect(x2,y1,canvas.width-x2,y2-y1); const sz = canvas.width / 80; ctx.fillStyle = "#00e676"; ctx.fillRect(x1 - sz/2, y1 - sz/2, sz, sz); ctx.fillRect(x2 - sz/2, y1 - sz/2, sz, sz); ctx.fillRect(x1 - sz/2, y2 - sz/2, sz, sz); ctx.fillRect(x2 - sz/2, y2 - sz/2, sz, sz); } let cellNum = 1; for(let r=0; r < fRows.length - 1; r++) { for(let c=0; c < fCols.length - 1; c++) { const sx = x1 + fCols[c]*gw, sy = y1 + fRows[r]*gh, sw = (fCols[c+1]-fCols[c])*gw, sh = (fRows[r+1]-fRows[r])*gh; const mx = sw * cropP, my = sh * cropP; ctx.strokeStyle = "#00e676"; ctx.lineWidth = canvas.width / 110; ctx.strokeRect(sx + mx, sy + my, sw - mx*2, sh - my*2); const fs = Math.min(sw, sh) * 0.18; ctx.font = `bold ${fs}px Pretendard`; ctx.textAlign = "center"; ctx.textBaseline = "middle"; ctx.strokeStyle = "black"; ctx.lineWidth = fs / 10; ctx.strokeText(cellNum, sx + sw/2, sy + sh/2); ctx.fillStyle = "#00e676"; ctx.fillText(cellNum, sx + sw/2, sy + sh/2); cellNum++; } } } else { const cx = cropBox.x * canvas.width, cy = cropBox.y * canvas.height, cw = cropBox.w * canvas.width, ch = cropBox.h * canvas.height; ctx.strokeStyle = "#00e676"; ctx.lineWidth = canvas.width / 110; ctx.strokeRect(cx, cy, cw, ch); } }
    function handleStart(e) { if(!previewImg) return; const rect = e.target.getBoundingClientRect(); const cx = e.touches ? e.touches[0].clientX : e.clientX, cy = e.touches ? e.touches[0].clientY : e.clientY; const mx = (cx - rect.left) / rect.width, my = (cy - rect.top) / rect.height, tol = 0.04; if(currentTab === 'split' && document.getElementById('freeCheck').checked) { if(Math.abs(mx - gridBox.x1) < tol && Math.abs(my - gridBox.y1) < tol) draggingType = 'corner-tl'; else if(Math.abs(mx - gridBox.x2) < tol && Math.abs(my - gridBox.y1) < tol) draggingType = 'corner-tr'; else if(Math.abs(mx - gridBox.x1) < tol && Math.abs(my - gridBox.y2) < tol) draggingType = 'corner-bl'; else if(Math.abs(mx - gridBox.x2) < tol && Math.abs(my - gridBox.y2) < tol) draggingType = 'corner-br'; else if(Math.abs(mx - gridBox.x1) < tol) draggingType = 'bound-x1'; else if(Math.abs(mx - gridBox.x2) < tol) draggingType = 'bound-x2'; else if(Math.abs(my - gridBox.y1) < tol) draggingType = 'bound-y1'; else if(Math.abs(my - gridBox.y2) < tol) draggingType = 'bound-y2'; else colPos.forEach((p, i) => { if(Math.abs(mx - (gridBox.x1 + p*(gridBox.x2-gridBox.x1))) < tol/2) { draggingIdx = i; draggingType = 'col'; } }); if(draggingIdx === -1) rowPos.forEach((p, i) => { if(Math.abs(my - (gridBox.y1 + p*(gridBox.y2-gridBox.y1))) < tol/2) { draggingIdx = i; draggingType = 'row'; } }); if(draggingIdx === -1 && draggingType === null && mx > gridBox.x1 && mx < gridBox.x2 && my > gridBox.y1 && my < gridBox.y2) { draggingType = 'move-grid'; draggingIdx = { ox: mx, oy: my }; dragStartGrid = { ...gridBox }; } } else if(currentTab === 'crop') { if(Math.abs(mx - (cropBox.x+cropBox.w)) < tol && Math.abs(my - (cropBox.y+cropBox.h)) < tol) draggingType = 'resize'; else if(mx > cropBox.x && mx < (cropBox.x+cropBox.w) && my > cropBox.y && my < (cropBox.y+cropBox.h)) { draggingType = 'move'; draggingIdx = { ox: mx - cropBox.x, oy: my - cropBox.y }; } } }
    function handleMove(e) { if(!previewImg || !draggingType) return; if(e.type.startsWith('touch')) e.preventDefault(); const rect = e.target.getBoundingClientRect(); const cx = e.touches ? e.touches[0].clientX : e.clientX, cy = e.touches ? e.touches[0].clientY : e.clientY; const mx = (cx - rect.left) / rect.width, my = (cy - rect.top) / rect.height; if(draggingType === 'corner-tl') { gridBox.x1 = Math.min(Math.max(0, mx), gridBox.x2 - 0.02); gridBox.y1 = Math.min(Math.max(0, my), gridBox.y2 - 0.02); } else if(draggingType === 'corner-tr') { gridBox.x2 = Math.max(Math.min(1, mx), gridBox.x1 + 0.02); gridBox.y1 = Math.min(Math.max(0, my), gridBox.y2 - 0.02); } else if(draggingType === 'corner-bl') { gridBox.x1 = Math.min(Math.max(0, mx), gridBox.x2 - 0.02); gridBox.y2 = Math.max(Math.min(1, my), gridBox.y1 + 0.02); } else if(draggingType === 'corner-br') { gridBox.x2 = Math.max(Math.min(1, mx), gridBox.x1 + 0.02); gridBox.y2 = Math.max(Math.min(1, my), gridBox.y1 + 0.02); } else if(draggingType.startsWith('bound-')) { const s = draggingType.split('-')[1]; gridBox[s] = Math.max(0, Math.min(1, s.includes('x') ? mx : my)); } else if(draggingType === 'col') colPos[draggingIdx] = Math.max(0.01, Math.min(0.99, (mx - gridBox.x1) / (gridBox.x2 - gridBox.x1))); else if(draggingType === 'row') rowPos[draggingIdx] = Math.max(0.01, Math.min(0.99, (my - gridBox.y1) / (gridBox.y2 - gridBox.y1))); else if(draggingType === 'move-grid') { let dx = mx - draggingIdx.ox, dy = my - draggingIdx.oy; gridBox.x1 = Math.max(0, Math.min(1 - (dragStartGrid.x2-dragStartGrid.x1), dragStartGrid.x1 + dx)); gridBox.x2 = gridBox.x1 + (dragStartGrid.x2-dragStartGrid.x1); gridBox.y1 = Math.max(0, Math.min(1 - (dragStartGrid.y2-dragStartGrid.y1), dragStartGrid.y1 + dy)); gridBox.y2 = gridBox.y1 + (dragStartGrid.y2-dragStartGrid.y1); } else if(draggingType === 'resize') { cropBox.w = Math.max(0.05, mx - cropBox.x); let r = (fixedRatio === 'custom') ? (parseFloat(document.getElementById('ratioW').value) || 1) / (parseFloat(document.getElementById('ratioH').value) || 1) : (typeof fixedRatio === 'number' ? fixedRatio : null); if(r) cropBox.h = (cropBox.w * (previewImg.width/previewImg.height)) / r; else cropBox.h = Math.max(0.05, my - cropBox.y); } else if(draggingType === 'move') { cropBox.x = Math.max(0, Math.min(1 - cropBox.w, mx - draggingIdx.ox)); cropBox.y = Math.max(0, Math.min(1 - cropBox.h, my - draggingIdx.oy)); } drawVisualizer(); }
    function handleEnd() { draggingIdx = -1; draggingType = null; }
    async function executeAction(targetFile = null) { const fileToUse = targetFile || originalFile; if(!fileToUse) return; const btn = document.getElementById('downloadBtn'), originalText = t[currentLang].down; const targetMB = currentTargetMB, doWM = document.getElementById('wmCheck').checked, cropP = parseFloat(document.getElementById('cropInput').value) / 100; const img = await loadImage(fileToUse), base = fileToUse.name.replace(/\.[^/.]+$/, ""); if(currentTab === 'split') { const temp = document.createElement('canvas'); temp.width = img.width; temp.height = img.height; const tCtx = temp.getContext('2d'); tCtx.drawImage(img, 0, 0); if(doWM && maskData) applyEraser(tCtx, img.width, img.height); const x1 = gridBox.x1*img.width, x2 = gridBox.x2*img.width, y1 = gridBox.y1*img.height, y2 = gridBox.y2*img.height, gw = x2-x1, gh = y2-y1, fCols = [0, ...colPos, 1], fRows = [0, ...rowPos, 1], total = (fRows.length-1) * (fCols.length-1); if (isMobile) { if (mobileSplitIdx >= total) { mobileSplitIdx = 0; updateButtonText(); return; } const r = Math.floor(mobileSplitIdx / (fCols.length-1)), c = mobileSplitIdx % (fCols.length-1); let sx = x1 + fCols[c]*gw, sy = y1 + fRows[r]*gh, sw_p = (fCols[c+1]-fCols[c])*gw, sh_p = (fRows[r+1]-fRows[r])*gh; const mx = sw_p*cropP, my = sh_p*cropP, fw = Math.floor(sw_p-mx*2), fh = Math.floor(sh_p-my*2); const p = document.createElement('canvas'); p.width = fw; p.height = fh; p.getContext('2d').drawImage(temp, sx+mx, sy+my, fw, fh, 0, 0, fw, fh); p.toBlob(blob => save(blob, `${base}_${r+1}-${c+1}.${fileToUse.type.split('/')[1]}`), fileToUse.type, 1.0); mobileSplitIdx++; updateButtonText(); } else { btn.innerText = t[currentLang].wait; for(let r=0; r<fRows.length-1; r++) { for(let c=0; c<fCols.length-1; c++) { let sx = x1 + fCols[c]*gw, sy = y1 + fRows[r]*gh, sw_p = (fCols[c+1]-fCols[c])*gw, sh_p = (fRows[r+1]-fRows[r])*gh; const mx = sw_p*cropP, my = sh_p*cropP, fw = Math.floor(sw_p-mx*2), fh = Math.floor(sh_p-my*2); const p = document.createElement('canvas'); p.width = fw; p.height = fh; p.getContext('2d').drawImage(temp, sx+mx, sy+my, fw, fh, 0, 0, fw, fh); await new Promise(res => { p.toBlob(blob => { save(blob, `${base}_${r+1}-${c+1}.${fileToUse.type.split('/')[1]}`); setTimeout(res, 50); }, fileToUse.type, 1.0); }); } } btn.innerText = originalText; } } else { btn.innerText = t[currentLang].wait; const getBlob = async (q, s) => { const tw = Math.round(img.width * s), th = Math.round(img.height * s), tmp = document.createElement('canvas'); tmp.width = tw; tmp.height = th; const tc = tmp.getContext('2d'); tc.drawImage(img, 0, 0, tw, th); if(doWM && maskData) applyEraser(tc, tw, th); const cw = Math.round(cropBox.w * tw), ch = Math.round(cropBox.h * th), res = document.createElement('canvas'); res.width = cw; res.height = ch; res.getContext('2d').drawImage(tmp, Math.round(cropBox.x * tw), Math.round(cropBox.y * th), cw, ch, 0, 0, cw, ch); return new Promise(r => res.toBlob(b => r(b), 'image/jpeg', q)); }; let s = 1.0, q = 0.95, finalBlob = null; const limit = targetMB * 1024 * 1024, minLimit = limit * 0.95, lQ = 0.05, hQ = 1.0, lS = 0.5, hS = 1.0; let lowQ = lQ, highQ = hQ, lowS = lS, highS = hS; for(let i=0; i<30; i++) { q = (lowQ + highQ) / 2; s = (lowS + highS) / 2; finalBlob = await getBlob(q, s); if(finalBlob.size > limit) { highQ = q; highS = s; } else if(finalBlob.size < minLimit) { lowQ = q; lowS = s; } else break; } save(finalBlob, `${base}_target_${targetMB}MB.jpg`); btn.innerText = originalText; } }
    function applyEraser(ctx, w, h) { const imgData = ctx.getImageData(0,0,w,h), data = imgData.data, sx = w - maskW - FIX_X, sy = h - maskH - FIX_Y; for(let y=0; y<maskH; y++) { for(let x=0; x<maskW; x++) { const tx = sx + x, ty = sy + y; if(tx<0 || ty<0 || tx>=w || ty>=h) continue; const tIdx = (ty * w + tx) * 4, mIdx = (y * maskW + x) * 4, alpha = Math.min(maskData[mIdx]/255, 0.98); if(alpha < 0.05) continue; const f = 1/(1-alpha); for(let k=0; k<3; k++) data[tIdx+k] = Math.max(0, Math.min(255, (data[tIdx+k]-255*alpha)*f)); } } ctx.putImageData(imgData, 0, 0); }
    function save(blob, name) { const a = document.createElement('a'), url = URL.createObjectURL(blob); a.href = url; a.download = name; document.body.appendChild(a); a.click(); setTimeout(() => { document.body.removeChild(a); URL.revokeObjectURL(url); }, 100); }
    function loadImage(file) { return new Promise(r => { const i = new Image(), url = URL.createObjectURL(file); i.onload = () => { URL.revokeObjectURL(url); r(i); }; i.src = url; }); }
    function openPolicy(type) { document.getElementById('policyTitle').innerText = type === 'privacy' ? 'ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨' : 'ì´ìš©ì•½ê´€'; document.getElementById('policyText').innerHTML = policies[type]; document.getElementById('policyModal').classList.add('active'); }
    function closePolicy() { document.getElementById('policyModal').classList.remove('active'); }
    const policies = { privacy: `<strong>1. ê°œì¸ì •ë³´ ì²˜ë¦¬ ì›ì¹™</strong><br>Animo Pixel MasterëŠ” ì‚¬ìš©ìì˜ ì´ë¯¸ì§€ë¥¼ ì„œë²„ë¡œ ì „ì†¡í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ëª¨ë“  ì‘ì—…ì€ ë¸Œë¼ìš°ì € ë‚´ë¶€ì—ì„œë§Œ ìˆ˜í–‰ë©ë‹ˆë‹¤.<br><br><strong>2. ë°ì´í„° ë³´ê´€</strong><br>ì–´ë– í•œ ì´ë¯¸ì§€ ë°ì´í„°ë„ ìˆ˜ì§‘í•˜ê±°ë‚˜ ì €ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.<br><br><strong>3. ê´‘ê³  ë° ì¿ í‚¤</strong><br>ì• ë“œì„¼ìŠ¤ ê´‘ê³ ë¥¼ í†µí•´ ì‚¬ìš©ì ë§ì¶¤í˜• ê´‘ê³ ê°€ ê²Œì¬ë  ìˆ˜ ìˆìœ¼ë©°, ì´ëŠ” êµ¬ê¸€ì˜ ì •ì±…ì„ ë”°ë¦…ë‹ˆë‹¤.`, terms: `<strong>1. ì„œë¹„ìŠ¤ ëª©ì </strong><br>ì´ë¯¸ì§€ ë¶„í•  ë° ì›Œí„°ë§ˆí¬ ì œê±° ê¸°ëŠ¥ì„ ë¬´ë£Œë¡œ ì œê³µí•©ë‹ˆë‹¤.<br><br><strong>2. ì±…ì„ì˜ í•œê³„</strong><br>ë³¸ ë„êµ¬ë¥¼ ì‚¬ìš©í•´ ë°œìƒí•œ ê²°ê³¼ë¬¼ì— ëŒ€í•œ ë²•ì  ì±…ì„ì€ ì‚¬ìš©ìì—ê²Œ ìˆìŠµë‹ˆë‹¤.` };
</script>
</body>
</html>
